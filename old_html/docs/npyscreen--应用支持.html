<!doctype html><html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>应用支持</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="styles.css" type="text/css" />
</head>
<body><div class="main"><div class="tree">
<p><strong>Index</strong></p>
<p><a href="npyscreen.html">npyscreen</a></p>

<ol>
<li><a href="npyscreen--npyscreen介绍.html">npyscreen介绍</a></li>
<li><a href="npyscreen--创建npyscreen应用程序.html">创建npyscreen应用程序</a></li>
<li><a href="npyscreen--Application应用对象.html">Application应用对象</a></li>
<li><a href="npyscreen--Form窗口对象.html">Form窗口对象</a></li>
<li><a href="npyscreen--控件基本特性.html">控件:基本特性</a></li>
<li><a href="npyscreen--控件显示文本.html">控件:显示文本</a></li>
<li><a href="npyscreen--控件选取选项.html">控件:选取选项</a></li>
<li><a href="npyscreen--控件树表与树的显示.html">控件:树表与树的显示</a></li>
<li><a href="npyscreen--控件日期,滑块和复合控件.html">控件:日期,滑块和复合控件</a></li>
<li><a href="npyscreen--控件网格.html">控件:网格</a></li>
<li><a href="npyscreen--控件其他控制.html">控件:其他控制</a></li>
<li><a href="npyscreen--控件标题控件.html">控件:标题控件</a></li>
<li><a href="npyscreen--控件控件框.html">控件:控件框</a></li>
<li><a href="npyscreen--按键绑定全解.html">按键绑定全解</a></li>
<li><a href="npyscreen--增强鼠标支持.html">增强鼠标支持</a></li>
<li><a href="npyscreen--色彩支持.html">色彩支持</a></li>
<li><a href="npyscreen--显示简讯通知及选项.html">显示简讯通知及选项</a></li>
<li><a href="npyscreen--清空屏幕.html">清空屏幕</a></li>
<li><a href="npyscreen--应用支持.html">应用支持</a></li>
<li><a href="npyscreen--编写更复杂的窗口.html">编写更复杂的窗口</a></li>
<li><a href="npyscreen--编写测试.html">编写测试</a></li>
<li><a href="npyscreen--示例程序一个简单的通讯录.html">示例程序:一个简单的通讯录</a></li>
</ol></div>
<div class="page"><h1><b><u>应用支持</u></b></h1><strong><h2>应用支持</h2></strong><br /><br /><strong><h3>选项对象和选项列表对象</h3></strong><br /><br />一个常见问题就是显示一个选项列表给用户.在简单的应用中,可能会为了这个目的自定义设计一个的窗口,但是很多任务中自动生成的窗口更合适.于是一个用来支持这个的<strong>实验性</strong>系统在 2.0pre84版本中被引进.<br /><br />这个系统的核心是选项 Option对象的概念.这些对象根据它们的类型,要么存放单一值,要么存放值列表,同时任何与待定选项相关的文档,也会一起展示给用户.<br />选项对象是使用下面的参数创建的: OptionType(name, value=None, documentation=None, short_explanation=None, option_widget_keywords = None, default = None).<br />short_explanation参数现在没有在默认控件中使用,但是会在未来的版本中被使用.被设计成允许用户从有限范围的选项中进行选择的选项类,也有可能是带 choice参数创建的.<br /><br />所有的选项类也后会有 DEFAULT 和 WIDGET_TO_USE 类属性.如果默认值还没被定义的话,前者会定义默认值.第二个定义了让用户来调整待定选项的控件的类.<br /><br />下面是当前[版本]定义了的选项类: OptionFreeText, OptionSingleChoice, OptionMultiChoice, OptionMultiFreeList, OptionBoolean, OptionFilename, OptionDate, OptionMultiFreeText.存到option对象的值都应该用 set(value)方法设定,用 get()方法获取.所有的选项类也都定义了一个 when_set ,它可以被覆盖,并且在值被改修改后被调用.允许用户从一系列的优先选择中选取的选项类还有 setChoices(choices) 和 getChoices方法.<br /><br />选项列表可以使用 OptionListDisplay控件来显示.它接收选项列表当做 values属性的值.如果某个选项被选中,则有一个窗口展示给用户显示文档(如果有的话)并允许用户改变它[文档]的值.<br /><br /> 复合选项可能与 OptionList对象被聚在一起. OptionList类都有一个 options属性.它是一个简单的列表,选项对象能会被添加进来.未来的版本可能会定义一个不一样的API. OptionList对象是用来保存和恢复测试文件集合的.这些文件的格式是一个自定义的文本格式,类似于标准的Unix文件,但是更适合存储和恢复字符串列表(使用 tab/制表符 作为分隔符).这个格式还在演进,并可能未来的版本中被改变.只有和默认值不同的值会被存下来.<br /><br />OptionList对象可能会使用 filename参数创建,并且有 write_to_file(fn=None) 和 reload_from_file(fn=None)方法.<br /><br />SimpleOptionForm类是一个设计用来展示这些元素是如何运作的窗口. OptionListDisplay控件作为一个叫 wOptionList的属性被创建.<br /><br /><strong><h3>示例代码</h3></strong><br /><br />下面的短demo程序会在通过调用存储指定的选项到 '/tmp/test':<br /><div class="codebox"><div class="codebox"><span style="color:#0000ff;font-weight:700">#!/usr/bin/env&nbsp;python</span><br /><span style="color:#0000ff;font-weight:400">#&nbsp;encoding:&nbsp;utf-8</span><br /><br /><span style="color:#a020f0;font-weight:400">import</span>&nbsp;npyscreen<br />class&nbsp;TestApp(npyscreen.NPSApp):<br />&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;main(<span style="color:#008a8c;font-weight:400">self</span>):<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options&nbsp;=&nbsp;npyscreen.OptionList()<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000ff;font-weight:400">#&nbsp;just&nbsp;for&nbsp;convenience&nbsp;so&nbsp;we&nbsp;don't&nbsp;have&nbsp;to&nbsp;keep&nbsp;writing&nbsp;Options.options</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;options&nbsp;=&nbsp;Options.options<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;options.append(npyscreen.OptionFreeText(<span style="color:#ff00ff;font-weight:400">'FreeText'</span>,&nbsp;value=<span style="color:#ff00ff;font-weight:400">''</span>,&nbsp;documentation=<span style="color:#ff00ff;font-weight:400">"This&nbsp;is&nbsp;some&nbsp;documentation."</span>))<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;options.append(npyscreen.OptionMultiChoice(<span style="color:#ff00ff;font-weight:400">'Multichoice'</span>,&nbsp;choices=[<span style="color:#ff00ff;font-weight:400">'Choice&nbsp;1'</span>,&nbsp;<span style="color:#ff00ff;font-weight:400">'Choice&nbsp;2'</span>,&nbsp;<span style="color:#ff00ff;font-weight:400">'Choice&nbsp;3'</span>]))<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;options.append(npyscreen.OptionFilename(<span style="color:#ff00ff;font-weight:400">'Filename'</span>,&nbsp;))<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;options.append(npyscreen.OptionDate(<span style="color:#ff00ff;font-weight:400">'Date'</span>,&nbsp;))<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;options.append(npyscreen.OptionMultiFreeText(<span style="color:#ff00ff;font-weight:400">'Multiline&nbsp;Text'</span>,&nbsp;value=<span style="color:#ff00ff;font-weight:400">''</span>))<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;options.append(npyscreen.OptionMultiFreeList(<span style="color:#ff00ff;font-weight:400">'Multiline&nbsp;List'</span>))<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options.reload_from_file(<span style="color:#ff00ff;font-weight:400">'/tmp/test'</span>)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;FileNotFoundError:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pass<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;F&nbsp;&nbsp;=&nbsp;npyscreen.Form(name&nbsp;=&nbsp;<span style="color:#ff00ff;font-weight:400">"Welcome&nbsp;to&nbsp;Npyscreen"</span>,)<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ms&nbsp;=&nbsp;F.add(npyscreen.OptionListDisplay,&nbsp;name=<span style="color:#ff00ff;font-weight:400">"Option&nbsp;List"</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;values&nbsp;=&nbsp;options,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scroll_exit=<span style="color:#ff00ff;font-weight:400">True</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;max_height=<span style="color:#ff00ff;font-weight:400">None</span>)<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;F.edit()<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options.write_to_file(<span style="color:#ff00ff;font-weight:400">'/tmp/test'</span>)<br /><br />if&nbsp;<span style="color:#008a8c;font-weight:400">__name__</span>&nbsp;==&nbsp;<span style="color:#ff00ff;font-weight:400">"__main__"</span>:<br />&nbsp;&nbsp;&nbsp;&nbsp;App&nbsp;=&nbsp;TestApp()<br />&nbsp;&nbsp;&nbsp;&nbsp;App.run()</div></div><br /><br /></div></div>
</body></html>