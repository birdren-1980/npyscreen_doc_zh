<!doctype html><html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>控件:网格</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="styles.css" type="text/css" />
</head>
<body><div class="main"><div class="tree">
<p><strong>Index</strong></p>
<p><a href="npyscreen.html">npyscreen</a></p>

<ol>
<li><a href="npyscreen--npyscreen介绍.html">npyscreen介绍</a></li>
<li><a href="npyscreen--创建npyscreen应用程序.html">创建npyscreen应用程序</a></li>
<li><a href="npyscreen--Application应用对象.html">Application应用对象</a></li>
<li><a href="npyscreen--Form窗口对象.html">Form窗口对象</a></li>
<li><a href="npyscreen--控件基本特性.html">控件:基本特性</a></li>
<li><a href="npyscreen--控件显示文本.html">控件:显示文本</a></li>
<li><a href="npyscreen--控件选取选项.html">控件:选取选项</a></li>
<li><a href="npyscreen--控件树表与树的显示.html">控件:树表与树的显示</a></li>
<li><a href="npyscreen--控件日期,滑块和复合控件.html">控件:日期,滑块和复合控件</a></li>
<li><a href="npyscreen--控件网格.html">控件:网格</a></li>
<li><a href="npyscreen--控件其他控制.html">控件:其他控制</a></li>
<li><a href="npyscreen--控件标题控件.html">控件:标题控件</a></li>
<li><a href="npyscreen--控件控件框.html">控件:控件框</a></li>
<li><a href="npyscreen--按键绑定全解.html">按键绑定全解</a></li>
<li><a href="npyscreen--增强鼠标支持.html">增强鼠标支持</a></li>
<li><a href="npyscreen--色彩支持.html">色彩支持</a></li>
<li><a href="npyscreen--显示简讯通知及选项.html">显示简讯通知及选项</a></li>
<li><a href="npyscreen--清空屏幕.html">清空屏幕</a></li>
<li><a href="npyscreen--应用支持.html">应用支持</a></li>
<li><a href="npyscreen--编写更复杂的窗口.html">编写更复杂的窗口</a></li>
<li><a href="npyscreen--编写测试.html">编写测试</a></li>
<li><a href="npyscreen--示例程序一个简单的通讯录.html">示例程序:一个简单的通讯录</a></li>
</ol></div>
<div class="page"><h1><b><u>控件:网格</u></b></h1><strong><h2>控件:网格</h2></strong><br /><br />SimpleGrid<br />----这个提供了一个类似电子表的画面显示.默认它只会准备好显示信息(在字段的网格中).不过,它被定义的很灵活,可以很容易的定制,来显示各种不同的数据.未来的版本可能还会包含新类型的网格对象.注意,你可以在网格对象创建时,通过指定 columns 或者 column_width 来控制网格的外观.以后的情况可能是,其他的多行类将会由该类衍生.<br />----光标的位置在 .edit_cell 属性中指定.注意这个要符合(古怪的) curse 库的惯例,先指定行,再指定列.<br />----values应该用一个二维数组指定.<br />----便利性函数[工具] set_grid_values_from_flat_list(new_values, max_cols=None, reset_cursor=True)<span style="color:#404040;"> </span>接收一个扁平[单维度的]列表并把它显示到网格上.<br />----以下的参数可以被传递到构造函数:<br />----<div class="codebox"><div class="codebox">columns&nbsp;=&nbsp;<span style="color:#ff00ff;font-weight:400">None</span><br />column_width&nbsp;=&nbsp;<span style="color:#ff00ff;font-weight:400">None</span>,<br />col_margin=<span style="color:#ff00ff;font-weight:400">1</span>,<br />row_height&nbsp;=&nbsp;<span style="color:#ff00ff;font-weight:400">1</span>,<br />values&nbsp;=&nbsp;<span style="color:#ff00ff;font-weight:400">None</span><br />always_show_cursor&nbsp;=&nbsp;<span style="color:#ff00ff;font-weight:400">False</span><br />select_whole_line&nbsp;=&nbsp;<span style="color:#ff00ff;font-weight:400">False</span>&nbsp;(new&nbsp;in&nbsp;version&nbsp;<span style="color:#ff00ff;font-weight:400">4.2</span>)</div></div><br />----从 SimpleGrid类衍生的类可能会希望改一下下面的类属性:<br />----<div class="codebox"><div class="codebox">_contained_widgets&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;textbox.Textfield<br />default_column_number&nbsp;=&nbsp;<span style="color:#ff00ff;font-weight:400">4</span><br />additional_y_offset&nbsp;&nbsp;&nbsp;=&nbsp;<span style="color:#ff00ff;font-weight:400">0</span>&nbsp;&nbsp;<span style="color:#0000ff;font-weight:400">#&nbsp;additional&nbsp;offset&nbsp;to&nbsp;leave&nbsp;within&nbsp;the&nbsp;widget&nbsp;before&nbsp;the&nbsp;grid</span><br />additional_x_offset&nbsp;&nbsp;&nbsp;=&nbsp;<span style="color:#ff00ff;font-weight:400">0</span>&nbsp;&nbsp;<span style="color:#0000ff;font-weight:400">#&nbsp;additional&nbsp;offset&nbsp;to&nbsp;leave&nbsp;within&nbsp;the&nbsp;widget&nbsp;before&nbsp;the&nbsp;grid</span><br />select_whole_line&nbsp;&nbsp;&nbsp;<span style="color:#0000ff;font-weight:400">#&nbsp;highlight&nbsp;the&nbsp;whole&nbsp;line&nbsp;that&nbsp;the&nbsp;cursor&nbsp;is&nbsp;on</span></div></div><br /><br />GridColTitles<br />----跟简单网格类差不多,但是会用终端显示器的前两行来显示列标题.它可以在函数构造的时候给出 col_titles 参数,或者在其他任何时间设置 col_titles 属性来配置.不论哪种情况,都要给出一个字符串的列表.<br /><br /><strong><h3>自定义单独的网格单元的外观</h3></strong><br /><br />在4.8.2版本中新加入<br /><br />对于一些应用,根据 内部的网格控件的内容 来自定义它们属性,可能会更合适.在网格控件把某个单元的值设定以后,在该单元的内容被绘制到屏幕上之前,会调用一个叫做 custom_print_cell(actual_cell, display_value)的方法.这里的 actual_cell 参数是在底层用于进行显示的控件对象,而 display_value 是被设定用来作为单元内容的对象(是 display_value方法的输出).<br /><br />下面的代码演示了如何利用这些功能便利来调整网格中显示的文本的颜色.我要向 Johan Lundstr?m 表示感谢,他提出了该特性的提议:<br /><div class="codebox"><div class="codebox">class&nbsp;MyGrid(npyscreen.GridColTitles):<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000ff;font-weight:400">#&nbsp;You&nbsp;need&nbsp;to&nbsp;override&nbsp;custom_print_cell&nbsp;to&nbsp;manipulate&nbsp;how</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000ff;font-weight:400">#&nbsp;a&nbsp;cell&nbsp;is&nbsp;printed.&nbsp;In&nbsp;this&nbsp;example&nbsp;we&nbsp;change&nbsp;the&nbsp;color&nbsp;of&nbsp;the</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000ff;font-weight:400">#&nbsp;text&nbsp;depending&nbsp;on&nbsp;the&nbsp;string&nbsp;value&nbsp;of&nbsp;cell.</span><br />&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;custom_print_cell(<span style="color:#008a8c;font-weight:400">self</span>,&nbsp;actual_cell,&nbsp;cell_display_value):<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;cell_display_value&nbsp;==<span style="color:#ff00ff;font-weight:400">'FAIL'</span>:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;actual_cell.color&nbsp;=&nbsp;<span style="color:#ff00ff;font-weight:400">'DANGER'</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;cell_display_value&nbsp;==&nbsp;<span style="color:#ff00ff;font-weight:400">'PASS'</span>:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;actual_cell.color&nbsp;=&nbsp;<span style="color:#ff00ff;font-weight:400">'GOOD'</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;actual_cell.color&nbsp;=&nbsp;<span style="color:#ff00ff;font-weight:400">'DEFAULT'</span><br /><br />def&nbsp;myFunction(*args):<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000ff;font-weight:400">#&nbsp;making&nbsp;an&nbsp;example&nbsp;Form</span><br />&nbsp;&nbsp;&nbsp;&nbsp;F&nbsp;=&nbsp;npyscreen.Form(name=<span style="color:#ff00ff;font-weight:400">'Example&nbsp;viewer'</span>)<br />&nbsp;&nbsp;&nbsp;&nbsp;myFW&nbsp;=&nbsp;F.add(npyscreen.TitleText)<br />&nbsp;&nbsp;&nbsp;&nbsp;gd&nbsp;=&nbsp;F.add(MyGrid)<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000ff;font-weight:400">#&nbsp;Adding&nbsp;values&nbsp;to&nbsp;the&nbsp;Grid,&nbsp;this&nbsp;code&nbsp;just&nbsp;randomly</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000ff;font-weight:400">#&nbsp;fills&nbsp;a&nbsp;2&nbsp;x&nbsp;4&nbsp;grid&nbsp;with&nbsp;random&nbsp;PASS/FAIL&nbsp;strings.</span><br />&nbsp;&nbsp;&nbsp;&nbsp;gd.values&nbsp;=&nbsp;[]<br />&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;x&nbsp;in&nbsp;range(<span style="color:#ff00ff;font-weight:400">2</span>):<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;row&nbsp;=&nbsp;[]<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;y&nbsp;in&nbsp;range(<span style="color:#ff00ff;font-weight:400">4</span>):<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;bool(random.getrandbits(<span style="color:#ff00ff;font-weight:400">1</span>)):<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;row.append(<span style="color:#ff00ff;font-weight:400">"PASS"</span>)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;row.append(<span style="color:#ff00ff;font-weight:400">"FAIL"</span>)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gd.values.append(row)<br />&nbsp;&nbsp;&nbsp;&nbsp;F.edit()<br /><br />if&nbsp;<span style="color:#008a8c;font-weight:400">__name__</span>&nbsp;==&nbsp;<span style="color:#ff00ff;font-weight:400">'__main__'</span>:<br />&nbsp;&nbsp;&nbsp;&nbsp;npyscreen.wrapper_basic(myFunction)</div></div><br /><br /></div></div>
</body></html>