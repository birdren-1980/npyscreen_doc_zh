

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-CN" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-CN" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Widgets: Basic Features &mdash; npyscreen 中文手册 2 文档</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script src="_static/translations.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="搜索" href="search.html" />
    <link rel="next" title="Widgets: Displaying Text" href="widgets-text.html" />
    <link rel="prev" title="Form Objects" href="form-objects.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> npyscreen 中文手册
          

          
          </a>

          
            
            
              <div class="version">
                2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">npyscreen简介</a></li>
<li class="toctree-l1"><a class="reference internal" href="application-structure.html">创建npyscreen应用程序</a></li>
<li class="toctree-l1"><a class="reference internal" href="application-objects.html">应用对象</a></li>
<li class="toctree-l1"><a class="reference internal" href="application-objects.html#id5">其他应用类</a></li>
<li class="toctree-l1"><a class="reference internal" href="form-objects.html">Form Objects</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Widgets: Basic Features</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#creating-widgets">Creating Widgets</a></li>
<li class="toctree-l2"><a class="reference internal" href="#constructor-arguments">Constructor arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-and-displaying-widgets">Using and Displaying Widgets</a></li>
<li class="toctree-l2"><a class="reference internal" href="#titled-widgets">Titled Widgets</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creating-your-own-widgets">Creating your own widgets</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="widgets-text.html">Widgets: Displaying Text</a></li>
<li class="toctree-l1"><a class="reference internal" href="widgets-multiline.html">Widgets: Picking Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="widgets-trees.html">Widgets: Trees and Tree displays</a></li>
<li class="toctree-l1"><a class="reference internal" href="widgets-general.html">Widgets: Dates, Sliders and Combination Widgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="widgets-general.html#widgets-grids">Widgets: Grids</a></li>
<li class="toctree-l1"><a class="reference internal" href="widgets-general.html#widgets-other-controls">Widgets: Other Controls</a></li>
<li class="toctree-l1"><a class="reference internal" href="widgets-title.html">Widgets: Titled Widgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="widgets-title.html#widgets-box-widgets">Widgets: Box Widgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="keybindings.html">All about Key Bindings</a></li>
<li class="toctree-l1"><a class="reference internal" href="mouse.html">Enhancing Mouse Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="color.html">Support for Colour</a></li>
<li class="toctree-l1"><a class="reference internal" href="messages.html">Displaying Brief Messages and Choices</a></li>
<li class="toctree-l1"><a class="reference internal" href="messages.html#blanking-the-screen">Blanking the Screen</a></li>
<li class="toctree-l1"><a class="reference internal" href="options.html">Application Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="muttlike.html">Writing More Complex Forms</a></li>
<li class="toctree-l1"><a class="reference internal" href="writing-tests.html">Writing Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="example-addressbk.html">Example Application: A simple address book</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">npyscreen 中文手册</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Widgets: Basic Features</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/widgets.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="widgets-basic-features">
<h1>Widgets: Basic Features<a class="headerlink" href="#widgets-basic-features" title="永久链接至标题">¶</a></h1>
<div class="section" id="creating-widgets">
<h2>Creating Widgets<a class="headerlink" href="#creating-widgets" title="永久链接至标题">¶</a></h2>
<p>Widgets are created by passing their class as the first argument of a Form’s <em>add(…)</em> method.  The remaining arguments will be passed to the widget’s own constructor.  These control things such as size, position, name, and initial values.</p>
</div>
<div class="section" id="constructor-arguments">
<h2>Constructor arguments<a class="headerlink" href="#constructor-arguments" title="永久链接至标题">¶</a></h2>
<dl>
<dt><em>name=</em></dt><dd><p>You should probably give each widget a name (a string).  Where appropriate, it will be used as the label of the widget.</p>
</dd>
<dt><em>relx=</em>, <em>rely=</em></dt><dd><p>The position of the widget on the Form is controlled by relx and rely integers.   You don’t have to specify them, in which case the form will do its best to decide where to put the widget.  You can specify only one or the other if you so choose (eg. you probably don’t usually need to specify relx).  <em>New in Version 4.3.0</em>: if you give a negative value for rely or relx, the widget will be positioned relative to the bottom or right hand side of the Form.  If the form is resized, npyscreen will do its best to keep the widget in place.</p>
</dd>
<dt><em>width=</em>, <em>height=</em>, <em>max_width=</em>, <em>max_height=</em></dt><dd><p>By default, widgets will expand to fill all available space to the right and downwards, unless that would not make sense - for example single lines of text do not need moe than one line, and so don’t claim more than one.  To alter the size of a widget, therefore, specify a different <em>max_width</em> or <em>max_height</em>.  It is probably better to use the max_ versions - these will not raise an error if space is getting tight and you specify too much, but will try to squash the widget into remaining space.</p>
</dd>
<dt><em>value=</em></dt><dd><p>The value of a widget is the thing a user can change - a string, a date, a selection of items, a filename.  The initial setting of the <em>.value</em> attribute can be specified here.</p>
</dd>
<dt><em>values=</em></dt><dd><p>Where a widget offers the user a selection from a list of values, these can be specified here: this is the initial setting of the <em>values</em> attribute.</p>
</dd>
<dt><em>editable=True</em></dt><dd><p>Whether the user should be able to edit a widget.  (Initial setting of the <em>.editable</em> attribute.)</p>
</dd>
<dt><em>hidden=False</em></dt><dd><p>Whether a widget is visible or not.  (Initial setting of the <em>.hidden</em> attribute.)</p>
</dd>
<dt><em>color=’DEFAULT’</em>, labelColor=’LABEL’</dt><dd><p>Provides a hint to the colour-management system as to how the widget should be displayed.</p>
<p>For more details see  <a class="reference internal" href="color.html#color-reference"><span class="std std-ref">setting up colors</span></a>.</p>
</dd>
<dt><em>scroll_exit=False</em>, <em>slow_scroll=False</em>, <em>exit_left</em>, <em>exit_right</em></dt><dd><p>These affect the way a user interacts with multi-line widgets.  <em>scroll_exit</em> decides whether or not the user can move from the first or last item to the previous or next widget.  <em>slow_scroll</em> means that widgets that scroll will do so one line at at time, not by the screen-full. The options <em>exit_left|right</em> dictate whether the user can exit a widget using the left and right arrow keys.</p>
</dd>
</dl>
</div>
<div class="section" id="using-and-displaying-widgets">
<h2>Using and Displaying Widgets<a class="headerlink" href="#using-and-displaying-widgets" title="永久链接至标题">¶</a></h2>
<p>All widgets have the following methods:</p>
<dl>
<dt><em>display()</em></dt><dd><p>Redraws the widget and tells curses to update the screen.</p>
</dd>
<dt><em>update(clear=True)</em></dt><dd><p>Redraws the widget, but doesn’t tell curses to update the screen (it is more efficient to update all widgets and then have the Form on which they sit tell curses to redraw the screen all in one go).</p>
<p>Most widgets accept the optional argument <em>clear=False|True</em> which affects whether they first blank the area they occupy before redrawing themselves.</p>
</dd>
<dt><em>when_parent_changes_value()</em></dt><dd><p>Called whenever the parent form’s <em>set_value(value)</em> method is called.</p>
</dd>
<dt><em>when_value_edited()</em></dt><dd><p>Called when, during editing of the widget, its value changes.  I.e. after keypresses.
You can disable this by setting the attribute <em>check_value_change</em> to False.</p>
<p>You can override this function for your own use.</p>
</dd>
<dt><em>when_cursor_moved()</em></dt><dd><p>Called when, during the editing of the widget, its cursor has been moved.  You can disable
the check for this by setting the attribute <em>check_cursor_move</em> to False.</p>
<p>You can override this function for your own use.</p>
</dd>
<dt><em>edit()</em></dt><dd><p>Allow the user to interact with the widget.  The method returns when the user leaves the widget.  In most cases, you will never need to call this method yourself, and for the most part this should be regarded as part of the internal API of npyscreen.</p>
</dd>
<dt><em>set_relyx()</em></dt><dd><p>Set the position of the widget on the Form.  If y or x is a negative value,
npyscreen will try to position it relative to the bottom or right edge of the
Form.  Note that this ignores any margins that the Form may have defined.
(New in Version 4.3.0).</p>
</dd>
<dt><em>safe_to_exit()</em></dt><dd><p>This method is called by the default handlers before a user tries to exit from a widget.  It should return True if this should be allowed and False if it should not.  You may override this method to perform any verification of the contents of a field before allowing the user to exit.  (New in Version 4.10.0)</p>
</dd>
</dl>
</div>
<div class="section" id="titled-widgets">
<h2>Titled Widgets<a class="headerlink" href="#titled-widgets" title="永久链接至标题">¶</a></h2>
<p>Many widgets exist in two forms, one with a label, one without.  For example Textbox and TitleText.  If the label is particularly long (at time of construction), the label may be put on its own line.  Additional constructor arguments:</p>
<dl class="simple">
<dt><em>use_two_lines=</em></dt><dd><p>If either True or False, override what the widget would otherwise choose.</p>
</dd>
<dt><em>field_width=</em></dt><dd><p>(For text fields) - how wide should the entry part of the widget be?</p>
</dd>
<dt><em>begin_entry_at=16</em></dt><dd><p>At what column should the entry part of the widget begin?</p>
</dd>
</dl>
<p>Internally titled widgets are actually a textbox (for the label) and whatever other kind of widget is required.  You can access the separate widgets (if you ever need to - you shouldn’t) through the <em>label_widget</em> and <em>entry_widget</em> attributes. However, you may never need to, since the <em>value</em> and <em>values</em> attributes of the combined widget should work as expected.</p>
</div>
<div class="section" id="creating-your-own-widgets">
<h2>Creating your own widgets<a class="headerlink" href="#creating-your-own-widgets" title="永久链接至标题">¶</a></h2>
<p>All widgets should inherit from the class <cite>Widget</cite>.</p>
<dl class="simple">
<dt><em>calculate_area_neeeded</em></dt><dd><p>This function is called to ask the widget how many lines and columns it requires (for a minimal display).  You should return a tuple with exactly two numbers.  Returning 0 for either argument says that the widget should be given all the remaining space on the display if it is available.</p>
</dd>
</dl>
<p>If you are writing text to the screen you should avoid using curses directly, and instead use the function</p>
<dl class="simple">
<dt><em>add_line(realy, realx, unicode_string, attributes_list, max_columns, force_ascii=False)</em></dt><dd><p>This function adds a line of text to the display. <cite>realy</cite> and <cite>realx</cite> are the absolute position on the Form. <cite>attributes_list</cite> is a list of attributes that should be applied to each character.  If all of them require the same attribute, use the <cite>make_attributes_list</cite> method to create a list of the right length.</p>
</dd>
<dt><em>make_attributes_list(unicode_string, attribute)</em></dt><dd><p>A convenience function.  Retuns a list the length of the unicode_string provided, with each entry of the list containing a copy of attribute.</p>
</dd>
<dt><em>resize()</em></dt><dd><p>You can override this method to perform any necessary actions when the widget is resized.  (New in version 4.3.0)</p>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="widgets-text.html" class="btn btn-neutral float-right" title="Widgets: Displaying Text" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="form-objects.html" class="btn btn-neutral float-left" title="Form Objects" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Nicholas Cole

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>