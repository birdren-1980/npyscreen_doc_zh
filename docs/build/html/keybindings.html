

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-CN" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-CN" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>All about Key Bindings &mdash; npyscreen 中文手册 2 文档</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script src="_static/translations.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="搜索" href="search.html" />
    <link rel="next" title="Enhancing Mouse Support" href="mouse.html" />
    <link rel="prev" title="Widgets: Titled Widgets" href="widgets-title.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> npyscreen 中文手册
          

          
          </a>

          
            
            
              <div class="version">
                2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">npyscreen简介</a></li>
<li class="toctree-l1"><a class="reference internal" href="application-structure.html">创建npyscreen应用程序</a></li>
<li class="toctree-l1"><a class="reference internal" href="application-objects.html">应用对象</a></li>
<li class="toctree-l1"><a class="reference internal" href="application-objects.html#id5">其他应用类</a></li>
<li class="toctree-l1"><a class="reference internal" href="form-objects.html">Form Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="widgets.html">Widgets: Basic Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="widgets-text.html">Widgets: Displaying Text</a></li>
<li class="toctree-l1"><a class="reference internal" href="widgets-multiline.html">Widgets: Picking Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="widgets-trees.html">Widgets: Trees and Tree displays</a></li>
<li class="toctree-l1"><a class="reference internal" href="widgets-general.html">Widgets: Dates, Sliders and Combination Widgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="widgets-general.html#widgets-grids">Widgets: Grids</a></li>
<li class="toctree-l1"><a class="reference internal" href="widgets-general.html#widgets-other-controls">Widgets: Other Controls</a></li>
<li class="toctree-l1"><a class="reference internal" href="widgets-title.html">Widgets: Titled Widgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="widgets-title.html#widgets-box-widgets">Widgets: Box Widgets</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">All about Key Bindings</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#what-is-going-on">What is going on</a></li>
<li class="toctree-l2"><a class="reference internal" href="#adding-your-own-handlers">Adding your own handlers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="mouse.html">Enhancing Mouse Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="color.html">Support for Colour</a></li>
<li class="toctree-l1"><a class="reference internal" href="messages.html">Displaying Brief Messages and Choices</a></li>
<li class="toctree-l1"><a class="reference internal" href="messages.html#blanking-the-screen">Blanking the Screen</a></li>
<li class="toctree-l1"><a class="reference internal" href="options.html">Application Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="muttlike.html">Writing More Complex Forms</a></li>
<li class="toctree-l1"><a class="reference internal" href="writing-tests.html">Writing Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="example-addressbk.html">Example Application: A simple address book</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">npyscreen 中文手册</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>All about Key Bindings</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/keybindings.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="all-about-key-bindings">
<h1>All about Key Bindings<a class="headerlink" href="#all-about-key-bindings" title="永久链接至标题">¶</a></h1>
<div class="section" id="what-is-going-on">
<h2>What is going on<a class="headerlink" href="#what-is-going-on" title="永久链接至标题">¶</a></h2>
<p>Many objects can take actions based on user key presses.  All such objects inherit from the internal class InputHandler.  That class defines a dictionary called <em>handlers</em> and a list called <em>complex_handlers</em>.  Both of these are set up by a method called <em>set_up_handlers</em> called during the Constructor.</p>
<dl>
<dt><em>handlers</em></dt><dd><p>Might look something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="n">curses</span><span class="o">.</span><span class="n">ascii</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span>   <span class="bp">self</span><span class="o">.</span><span class="n">h_exit_down</span><span class="p">,</span>
 <span class="n">curses</span><span class="o">.</span><span class="n">ascii</span><span class="o">.</span><span class="n">CR</span><span class="p">:</span>   <span class="bp">self</span><span class="o">.</span><span class="n">h_exit_down</span><span class="p">,</span>
 <span class="n">curses</span><span class="o">.</span><span class="n">ascii</span><span class="o">.</span><span class="n">TAB</span><span class="p">:</span>  <span class="bp">self</span><span class="o">.</span><span class="n">h_exit_down</span><span class="p">,</span>
 <span class="n">curses</span><span class="o">.</span><span class="n">KEY_DOWN</span><span class="p">:</span>   <span class="bp">self</span><span class="o">.</span><span class="n">h_exit_down</span><span class="p">,</span>
 <span class="n">curses</span><span class="o">.</span><span class="n">KEY_UP</span><span class="p">:</span>     <span class="bp">self</span><span class="o">.</span><span class="n">h_exit_up</span><span class="p">,</span>
 <span class="n">curses</span><span class="o">.</span><span class="n">KEY_LEFT</span><span class="p">:</span>   <span class="bp">self</span><span class="o">.</span><span class="n">h_exit_left</span><span class="p">,</span>
 <span class="n">curses</span><span class="o">.</span><span class="n">KEY_RIGHT</span><span class="p">:</span>  <span class="bp">self</span><span class="o">.</span><span class="n">h_exit_right</span><span class="p">,</span>
 <span class="s2">&quot;^P&quot;</span><span class="p">:</span>              <span class="bp">self</span><span class="o">.</span><span class="n">h_exit_up</span><span class="p">,</span>
 <span class="s2">&quot;^N&quot;</span><span class="p">:</span>              <span class="bp">self</span><span class="o">.</span><span class="n">h_exit_down</span><span class="p">,</span>
 <span class="n">curses</span><span class="o">.</span><span class="n">ascii</span><span class="o">.</span><span class="n">ESC</span><span class="p">:</span>  <span class="bp">self</span><span class="o">.</span><span class="n">h_exit_escape</span><span class="p">,</span>
 <span class="n">curses</span><span class="o">.</span><span class="n">KEY_MOUSE</span><span class="p">:</span>  <span class="bp">self</span><span class="o">.</span><span class="n">h_exit_mouse</span><span class="p">,</span>
 <span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
<p>If a key is pressed (note support for notations like “^N” for “Control-N” and “!a” for “Alt N”) that exists as a key in this dictionary, the function associated with it is called.  No further action is taken.  By convention functions that handle user input are prefixed with h_.</p>
<dl>
<dt><em>complex_handlers</em></dt><dd><p>This list should contain list or tuple pairs like this (test_func, dispatch_func).</p>
<p>If the key is not named in the dictionary <em>handlers</em>, each test_func is run.  If it returns True, the dispatch_func is run and the search stops.</p>
<p>Complex handlers are used, for example, to ensure that only printable characters are entered into a textbox.  Since they will be run frequently, there should be as few of them as possible, and they should execute as quickly as possible.</p>
</dd>
</dl>
<p>When a user is editing a widget and a key is pressed, <em>handlers</em> and then <em>complex_handlers</em> are used to try to find a function to execute. If the widget doesn’t define an action to be taken, the <em>handlers</em> and <em>complex_handlers</em> of the parent Form are then checked. Consequently, if you want to override the handler for a key that is already bound, like the Enter key, keep in mind that you do so on Widgets and not on the Form they’re part of, as the Widget’s handlers take precedence.</p>
</div>
<div class="section" id="adding-your-own-handlers">
<h2>Adding your own handlers<a class="headerlink" href="#adding-your-own-handlers" title="永久链接至标题">¶</a></h2>
<p>Objects that can handle user input define the following methods to assist with adding your own key bindings:</p>
<dl class="simple">
<dt><em>add_handlers(new_handlers)</em></dt><dd><p><em>new_handlers</em> should be a dictionary.</p>
</dd>
<dt><em>add_complex_handlers(new_handlers)</em></dt><dd><p><em>new_handlers</em> should be a list of lists.  Each sublist must be a pair <em>(test_function, callback)</em></p>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="mouse.html" class="btn btn-neutral float-right" title="Enhancing Mouse Support" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="widgets-title.html" class="btn btn-neutral float-left" title="Widgets: Titled Widgets" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Nicholas Cole

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>